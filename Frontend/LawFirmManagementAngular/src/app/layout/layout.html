<nz-layout class="layout">
  <!-- الشريط الجانبي -->
  <nz-sider
    nzCollapsible
    [(nzCollapsed)]="isCollapsed"
    [nzWidth]="240"
    [nzTrigger]="null"
    class="sidebar">

    <!-- اللوجو -->
    <div class="logo">
      <div class="logo-content" [class.collapsed]="isCollapsed">
        <i nz-icon nzType="balance-scale" class="logo-icon"></i>
        <span class="logo-text" *ngIf="!isCollapsed">المكتب القانوني</span>
      </div>
    </div>

    <!-- القائمة الجانبية -->
   <ul nz-menu nzTheme="dark" [nzInlineCollapsed]="isCollapsed" nzMode="inline">
  <ng-container *ngFor="let item of menuItems">
    <!-- العناصر التي تحتوي على أبناء -->
    <li *ngIf="item.children && item.children.length > 0"
        nz-submenu
        [nzTitle]="item.title"
        [nzIcon]="item.icon"
        [nzOpen]="item.isOpen">
      <ul>
        <li nz-menu-item
            *ngFor="let child of item.children"
            [nzSelected]="child.isActive"
            (click)="onSubMenuClick(item, child)">
          <i nz-icon [nzType]="child.icon"></i>
          <span>{{ child.title }}</span>
        </li>
      </ul>
    </li>

    <!-- العناصر العادية -->
    <li *ngIf="!item.children"
        nz-menu-item
        [nzSelected]="item.isActive"
        (click)="onMenuClick(item)">
      <i nz-icon [nzType]="item.icon"></i>
      <span>{{ item.title }}</span>
    </li>
  </ng-container>
</ul>

  </nz-sider>

  <!-- المحتوى الرئيسي -->
  <nz-layout class="site-layout">
    <!-- الهيدر -->
    <nz-header class="header">
      <div class="header-content">
        <!-- الجزء الأيسر -->
        <div class="header-left">
          <button
            nz-button
            nzType="text"
            (click)="isCollapsed = !isCollapsed"
            class="collapse-btn">
            <i nz-icon [nzType]="isCollapsed ? 'menu-unfold' : 'menu-fold'"></i>
          </button>

          <nz-breadcrumb class="breadcrumb">
            <nz-breadcrumb-item>لوحة التحكم</nz-breadcrumb-item>
            <nz-breadcrumb-item>نظرة عامة</nz-breadcrumb-item>
          </nz-breadcrumb>
        </div>

        <!-- الجزء الأيمن من الهيدر -->
        <div class="header-actions">
          <!-- البحث -->
          <nz-input-group nzPrefixIcon="search" class="search-box">
            <input type="text" nz-input placeholder="بحث..." />
          </nz-input-group>

          <!-- الإشعارات -->
          <div nz-dropdown [nzDropdownMenu]="notificationMenu" nzPlacement="bottomRight" class="notification-btn">
            <i nz-icon nzType="bell" nzTheme="outline"></i>
            <nz-badge [nzCount]="unreadNotifications" [nzOffset]="[-5,5]"></nz-badge>
          </div>

          <!-- الملف الشخصي -->
          <div nz-dropdown [nzDropdownMenu]="profileMenu" nzPlacement="bottomRight" class="profile-dropdown">
            <nz-avatar nzSize="small" nzSrc="/assets/avatar.png" nzAlt="صورة المستخدم"></nz-avatar>
            <div class="profile-info" *ngIf="!isCollapsed">
              <span class="profile-name">{{ userInfo.name }}</span>
              <span class="profile-role">{{ userInfo.role }}</span>
            </div>
            <i nz-icon nzType="down" class="profile-arrow"></i>
          </div>
        </div>
      </div>
    </nz-header>

    <!-- محتوى الصفحة -->
    <nz-content class="content">
      <router-outlet></router-outlet>
    </nz-content>

    <!-- الفوتر -->
    <!-- <nz-footer class="footer">
      <div class="footer-content">
        <span>© 2024 المكتب القانوني. جميع الحقوق محفوظة.</span>
        <div class="footer-links">
          <a>الشروط والأحكام</a>
          <a>سياسة الخصوصية</a>
          <a>الدعم</a>
        </div>
      </div>
    </nz-footer> -->
  </nz-layout>
</nz-layout>

<!-- قائمة الإشعارات -->
<nz-dropdown-menu #notificationMenu="nzDropdownMenu">
  <div nz-menu class="notification-menu">
    <div class="notification-header">
      <h4>الإشعارات</h4>
      <button nz-button nzType="text" (click)="markAllAsRead()">تعيين الكل كمقروء</button>
    </div>
    <div nz-menu-item *ngFor="let notification of notifications"
         [class.unread]="!notification.read">
      <div class="notification-item">
        <div class="notification-content">
          <div class="notification-title">{{ notification.title }}</div>
          <div class="notification-desc">{{ notification.description }}</div>
          <div class="notification-time">{{ notification.time }}</div>
        </div>
        <div class="notification-dot" *ngIf="!notification.read"></div>
      </div>
    </div>
    <div nz-menu-item class="view-all">
      <button nz-button nzType="link" nzBlock>عرض جميع الإشعارات</button>
    </div>
  </div>
</nz-dropdown-menu>

<!-- قائمة الملف الشخصي -->
<nz-dropdown-menu #profileMenu="nzDropdownMenu">
  <div nz-menu>
    <div nz-menu-item (click)="onProfileClick()">
      <i nz-icon nzType="user"></i>
      <span>الملف الشخصي</span>
    </div>
    <div nz-menu-item (click)="onSettingsClick()">
      <i nz-icon nzType="setting"></i>
      <span>الإعدادات</span>
    </div>
    <div nz-menu-item (click)="onPrivacyClick()">
      <i nz-icon nzType="lock"></i>
      <span>خصوصية</span>
    </div>
    <li nz-menu-divider></li>
    <div nz-menu-item (click)="onLogoutClick()">
      <i nz-icon nzType="logout"></i>
      <span>تسجيل الخروج</span>
    </div>
  </div>
</nz-dropdown-menu>
